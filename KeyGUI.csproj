<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')"/>
    <PropertyGroup>
        <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
        <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
        <ProjectGuid>{9677AD57-A9A6-4ED6-B0B6-1FEF02C98FB0}</ProjectGuid>
        <OutputType>Library</OutputType>
        <AppDesignerFolder>Properties</AppDesignerFolder>
        <RootNamespace>KeyGUI</RootNamespace>
        <AssemblyName>KeyGUI</AssemblyName>
        <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
        <TargetFrameworkVersion>v4.8</TargetFrameworkVersion>
        <FileAlignment>512</FileAlignment>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
        <PlatformTarget>AnyCPU</PlatformTarget>
        <DebugSymbols>true</DebugSymbols>
        <DebugType>full</DebugType>
        <Optimize>false</Optimize>
        <OutputPath>bin\Debug\</OutputPath>
        <DefineConstants>DEBUG;TRACE</DefineConstants>
        <ErrorReport>prompt</ErrorReport>
        <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
        <WarningLevel>4</WarningLevel>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
        <PlatformTarget>AnyCPU</PlatformTarget>
        <DebugType>pdbonly</DebugType>
        <Optimize>true</Optimize>
        <OutputPath>bin\Release\</OutputPath>
        <DefineConstants>TRACE</DefineConstants>
        <ErrorReport>prompt</ErrorReport>
        <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
        <WarningLevel>4</WarningLevel>
    </PropertyGroup>
    <ItemGroup>
        <Reference Include="0Harmony">
            <HintPath>..\Libraries\0Harmony.dll</HintPath>
        </Reference>
        <Reference Include="Assembly-CSharp">
            <HintPath>..\Libraries\Assembly-CSharp.dll</HintPath>
        </Reference>
        <Reference Include="BepInEx">
            <HintPath>..\Libraries\BepInEx.dll</HintPath>
        </Reference>
        <Reference Include="mscorlib"/>
        <Reference Include="Newtonsoft.Json">
            <HintPath>..\Libraries\Newtonsoft.Json.dll</HintPath>
        </Reference>
        <Reference Include="strings">
          <HintPath>..\Libraries\strings.dll</HintPath>
        </Reference>
        <Reference Include="System"/>
        <Reference Include="System.Core"/>
        <Reference Include="System.Data"/>
        <Reference Include="System.IO.Compression.FileSystem"/>
        <Reference Include="System.Net.Http"/>
        <Reference Include="UnityEngine">
            <HintPath>..\Libraries\UnityEngine.dll</HintPath>
        </Reference>
        <Reference Include="UnityEngine.CoreModule">
            <HintPath>..\Libraries\UnityEngine.CoreModule.dll</HintPath>
        </Reference>
        <Reference Include="UnityEngine.ImageConversionModule">
          <HintPath>..\Libraries\UnityEngine.ImageConversionModule.dll</HintPath>
        </Reference>
        <Reference Include="UnityEngine.IMGUIModule">
            <HintPath>..\Libraries\UnityEngine.IMGUIModule.dll</HintPath>
        </Reference>
        <Reference Include="UnityEngine.TextRenderingModule">
            <HintPath>..\Libraries\UnityEngine.TextRenderingModule.dll</HintPath>
        </Reference>
        <Reference Include="UnityEngine.UI">
            <HintPath>..\Libraries\UnityEngine.UI.dll</HintPath>
        </Reference>
    </ItemGroup>
    <ItemGroup>
        <Compile Include="Backend\KeyGuiNetworking.cs"/>
        <Compile Include="Framework\KeyGuiComponent.cs" />
        <Compile Include="Framework\Locales\KeyGuiLocale.cs" />
        <Compile Include="Framework\Menus\InvalidMenuInvocationContextException.cs" />
        <Compile Include="Framework\Menus\KeyGuiMenu.cs" />
        <Compile Include="Framework\Menus\KeyGuiMenuManager.cs" />
        <Compile Include="Framework\Menus\KeyGuiMessage.cs" />
        <Compile Include="Framework\Patches\KeyGuiPatch.cs" />
        <Compile Include="Framework\Powers\KeyGuiPower.cs" />
        <Compile Include="KeyGuiConfig.cs" />
        <Compile Include="KeyGui.cs" />
        <Compile Include="Menus\Alliances\KeyGuiAlliances.cs" />
        <Compile Include="Menus\Buildings\BuildingPlacementBuildingSelector\KeyGuiBuildingsBuildingPlacementBuildingSelector.cs" />
        <Compile Include="Menus\Buildings\KeyGuiBuildings.cs" />
        <Compile Include="Menus\Cities\KeyGuiCities.cs" />
        <Compile Include="Menus\Cities\ResourceEditor\KeyGuiCitiesResourceEditor.cs" />
        <Compile Include="Menus\Clans\KeyGuiClans.cs" />
        <Compile Include="Menus\Clans\TraitSelection\KeyGuiClansTraitSelection.cs" />
        <Compile Include="Menus\Cleansing\KeyGuiCleansing.cs" />
        <Compile Include="Menus\Crabzilla\KeyGuiCrabzilla.cs" />
        <Compile Include="Menus\Cultures\KeyGuiCultures.cs" />
        <Compile Include="Menus\Cultures\TraitSelection\KeyGuiCulturesTraitSelection.cs" />
        <Compile Include="Menus\Debugging\KeyGuiDebug.cs" />
        <Compile Include="Menus\Debugging\KeyGuiTesting.cs" />
        <Compile Include="Menus\Destruction\KeyGuiDestruction.cs" />
        <Compile Include="Menus\Disasters\KeyGuiDisasters.cs" />
        <Compile Include="Menus\GameSettings\KeyGuiGameSettings.cs" />
        <Compile Include="Menus\KeyGuiRootMenu.cs" />
        <Compile Include="Menus\Localizations\KeyGuiLocales.cs" />
        <Compile Include="Menus\ModConfig\ConfigOptions\ConfigOption.cs" />
        <Compile Include="Menus\ModConfig\ConfigOptions\GameSettings.cs" />
        <Compile Include="Menus\ModConfig\ConfigOptions\General.cs" />
        <Compile Include="Menus\ModConfig\ConfigOptions\Internal.cs" />
        <Compile Include="Menus\ModConfig\ConfigOptions\Items.cs" />
        <Compile Include="Menus\ModConfig\ConfigOptions\Traits.cs" />
        <Compile Include="Menus\ModConfig\KeyGuiModConfig.cs" />
        <Compile Include="Menus\Plots\KeyGuiPlots.cs" />
        <Compile Include="Menus\Saves\KeyGuiSaves.cs" />
        <Compile Include="Menus\Stats\KeyGuiStats.cs" />
        <Compile Include="Menus\Stats\StatBoundEditing\EditStat\KeyGuiStatsStatBoundEditingEditStat.cs" />
        <Compile Include="Menus\Stats\StatBoundEditing\KeyGuiStatsStatBoundEditing.cs" />
        <Compile Include="Menus\Traits\Instructions\KeyGuiTraitsInstructions.cs" />
        <Compile Include="Menus\Traits\KeyGuiTraits.cs" />
        <Compile Include="Menus\Zones\KeyGuiZones.cs" />
        <Compile Include="Patches\ClanBirthTraitsManagement.cs" />
        <Compile Include="Patches\CrabzillaManagement.cs" />
        <Compile Include="Patches\CultureBirthTraitsManagement.cs" />
        <Compile Include="Patches\CustomTraitsManager.cs" />
        <Compile Include="Patches\IceBoatMovementToggler.cs" />
        <Compile Include="Patches\MouseDragToggler.cs" />
        <Compile Include="Patches\TargetFramerateEditor.cs" />
        <Compile Include="Patches\UnitySpeedEditor.cs" />
        <Compile Include="Powers\AddZoneToCity.cs" />
        <Compile Include="Powers\CreateNewCulture.cs" />
        <Compile Include="Powers\CultureDeletion.cs" />
        <Compile Include="Powers\CultureForceSelectCity.cs" />
        <Compile Include="Powers\CultureForceSelectCulture.cs" />
        <Compile Include="Powers\CultureReset.cs" />
        <Compile Include="Powers\ForceCityAsCapitalCity.cs" />
        <Compile Include="Powers\ForceCityIntoOtherKingdom.cs" />
        <Compile Include="Powers\MakeActorKing.cs" />
        <Compile Include="Powers\MassItemAdditionRain.cs" />
        <Compile Include="Powers\MassTraitRemovalRain.cs" />
        <Compile Include="Powers\PlaceBuilding.cs" />
        <Compile Include="Powers\RemoveZoneFromCity.cs" />
        <Compile Include="Powers\WhisperOfAlliance.cs" />
        <Compile Include="Properties\AssemblyInfo.cs" />
        <Compile Include="Utils\CustomActorTrait.cs" />
        <Compile Include="Utils\CustomActorTraitsManager.cs" />
        <Compile Include="Utils\FileAssetManager.cs" />
        <Compile Include="Utils\KeyGuiModManager.cs" />
        <Compile Include="Utils\KeyGuiNetworkingResponseParsingHelper.cs" />
    </ItemGroup>
    <ItemGroup>
        <ProjectReference Include="..\BepInExModCompatibilityLayer\BepInExModCompatibilityLayer.csproj">
            <Project>{0476621e-89cd-4844-b646-66e09ebf5dd7}</Project>
            <Name>BepInExModCompatibilityLayer</Name>
        </ProjectReference>
        <ProjectReference Include="..\KeyGeneralPurposeLibrary\KeyGeneralPurposeLibrary.csproj">
            <Project>{b962f27e-55ab-4aef-9040-3bb59e5bb745}</Project>
            <Name>KeyGeneralPurposeLibrary</Name>
        </ProjectReference>
    </ItemGroup>
    <ItemGroup>
        <Content Include=".editorconfig" />
        <Content Include="assemble_keygui_distributable.ps1" />
        <Content Include="assemble_keygui_distributable.sh" />
        <Content Include="BuildAssets\DefaultAssets\DefaultSprite.png" />
        <Content Include="BuildAssets\DLL-Dependencies\Microsoft.CodeAnalysis.CSharp.dll" />
        <Content Include="BuildAssets\DLL-Dependencies\Microsoft.CodeAnalysis.dll" />
        <Content Include="BuildAssets\DLL-Dependencies\System.Collections.Immutable.dll" />
        <Content Include="BuildAssets\DLL-Dependencies\System.Memory.dll" />
        <Content Include="BuildAssets\DLL-Dependencies\System.Numerics.Vectors.dll" />
        <Content Include="BuildAssets\DLL-Dependencies\System.Reflection.Metadata.dll" />
        <Content Include="BuildAssets\DLL-Dependencies\System.Runtime.CompilerServices.Unsafe.dll" />
        <Content Include="BuildAssets\DLL-Dependencies\System.Text.Encoding.CodePages.dll" />
        <Content Include="BuildAssets\DLL-Dependencies\System.Threading.Tasks.Extensions.dll" />
        <Content Include="BuildAssets\Locales\ch.json" />
        <Content Include="BuildAssets\Locales\cz.json" />
        <Content Include="BuildAssets\Locales\en.json" />
    </ItemGroup>
    <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets"/>
    <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
         Other similar extension points exist, see Microsoft.Common.targets.
    <Target Name="BeforeBuild">
    </Target>
    <Target Name="AfterBuild">
    </Target>
    -->
    <PropertyGroup Condition=" '$(OS)' == 'UNIX' ">
        <KEYGUI_BIN_PATH Condition=" '$(KEYGUI_BIN_PATH)' == '' ">$(MSBuildProjectDirectory)/$(OutDir)</KEYGUI_BIN_PATH>
        <KEYGUI_BUILD_ASSETS_PATH Condition=" '$(KEYGUI_BUILD_ASSETS_PATH)' == '' ">$(MSBuildProjectDirectory)/BuildAssets</KEYGUI_BUILD_ASSETS_PATH>
        <BEPINEX_PLUGINS_FOLDER_PATH Condition=" '$(BEPINEX_PLUGINS_FOLDER_PATH)' == '' ">$(HOME)/Library/Application Support/Steam/steamapps/common/worldbox/BepInEx/plugins</BEPINEX_PLUGINS_FOLDER_PATH>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(OS)' == 'WINDOWS_NT' ">
        <KEYGUI_BIN_PATH Condition=" '$(KEYGUI_BIN_PATH)' == '' ">$(MSBuildProjectDirectory)\$(OutDir.TrimEnd('\'))</KEYGUI_BIN_PATH>
        <KEYGUI_BUILD_ASSETS_PATH Condition=" '$(KEYGUI_BUILD_ASSETS_PATH)' == '' ">$(MSBuildProjectDirectory)\BuildAssets</KEYGUI_BUILD_ASSETS_PATH>
        <BEPINEX_PLUGINS_FOLDER_PATH Condition=" '$(BEPINEX_PLUGINS_FOLDER_PATH)' == '' ">C:\Program Files (x86)\Steam\steamapps\common\worldbox\BepInEx/plugins</BEPINEX_PLUGINS_FOLDER_PATH>
    </PropertyGroup>
    <Target Name="PostBuild" AfterTargets="PostBuildEvent">
        <Exec Command="sh ./assemble_keygui_distributable.sh &quot;$(KEYGUI_BIN_PATH)&quot; &quot;$(KEYGUI_BUILD_ASSETS_PATH)&quot; &quot;$(BEPINEX_PLUGINS_FOLDER_PATH)&quot;" Condition=" '$(OS)' == 'UNIX' " />
        <Exec Command="powershell -ExecutionPolicy Bypass -File ./assemble_keygui_distributable.ps1 -KeyGuiBinPath &quot;$(KEYGUI_BIN_PATH)&quot; -KeyGuiBuildAssetsPath &quot;$(KEYGUI_BUILD_ASSETS_PATH)&quot; -BepInExPluginsFolderPath &quot;$(BEPINEX_PLUGINS_FOLDER_PATH)&quot;" Condition=" '$(OS)' == 'WINDOWS_NT' " />
    </Target>

</Project>
